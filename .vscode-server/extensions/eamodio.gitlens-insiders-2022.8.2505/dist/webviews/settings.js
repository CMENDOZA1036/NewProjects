(()=>{"use strict";var ge={};class L{constructor(t){this.method=t}}class P extends L{}class I extends L{}function x(r,t,e){r.method===t.method&&e(t.params)}const Z=new P("webview/ready"),he=new P("command/execute"),G=new P("configuration/preview"),K=new P("configuration/update"),E=new I("configuration/didChange"),Q=new I("configuration/didPreview"),B=new I("webview/didOpenAnchor"),O=/(?<literal>\[.*?\])|(?<year>YYYY|YY)|(?<month>M{1,4})|(?<day>Do|DD?)|(?<weekday>d{2,4})|(?<hour>HH?|hh?)|(?<minute>mm?)|(?<second>ss?)|(?<fractionalSecond>SSS)|(?<dayPeriod>A|a)|(?<timeZoneName>ZZ?)/g,q=/(?<dateStyle>full|long|medium|short)(?:\+(?<timeStyle>full|long|medium|short))?/,X=null;let b;const S=new Map;let m,k,y;function ee(r){typeof r=="string"?r==="system"?m=void 0:m=[r]:m=r??void 0,k=void 0,y=void 0,S.clear(),b=void 0}function fe(r,t){const e=new Date(r.getTime());for(const[n,o]of Object.entries(t))if(!!o)switch(n){case"years":e.setFullYear(e.getFullYear()+o);break;case"months":e.setMonth(e.getMonth()+o);break;case"days":e.setDate(e.getDate()+o);break;case"hours":e.setHours(e.getHours()+o);break;case"minutes":e.setMinutes(e.getMinutes()+o);break;case"seconds":e.setSeconds(e.getSeconds()+o);break}return e}function me(r,t){const e=r.getTime()-new Date().getTime();for(const[n,o,s,a]of X){const i=Math.abs(e);if(i>=o||o===1e3)return t?(b==null&&(y!=null?b=y.resolvedOptions().locale:k!=null?b=k.resolvedOptions().locale:(y=new Intl.RelativeTimeFormat(m,{localeMatcher:"best fit",numeric:"always",style:"narrow"}),b=y.resolvedOptions().locale)),b==="en"||b?.startsWith("en-")?`${Math.round(i/s)}${a}`:(y==null&&(y=new Intl.RelativeTimeFormat(m,{localeMatcher:"best fit",numeric:"always",style:"narrow"})),y.format(Math.round(e/s),n))):(k==null&&(k=new Intl.RelativeTimeFormat(m,{localeMatcher:"best fit",numeric:"auto",style:"long"})),k.format(Math.round(e/s),n))}return""}function j(r,t,e,n=!0){t=t??void 0;const o=`${e??""}:${t}`;let s=S.get(o);if(s==null){const l=te(t);let c;e==null?c=m:e==="system"?c=void 0:c=[e],s=new Intl.DateTimeFormat(c,l),n&&S.set(o,s)}if(t==null||q.test(t))return s.format(r);function a(l){const c=`${e??""}:time:${l}`;let u=S.get(c);if(u==null){const g={localeMatcher:"best fit",timeStyle:l};let h;e==null?h=m:e==="system"?h=void 0:h=[e],u=new Intl.DateTimeFormat(h,g),n&&S.set(c,u)}return u}const i=s.formatToParts(r);return t.replace(O,(l,c,u,g,h,ve,ke,Se,we,_e,Pe,$e,Te,Ce,z)=>{if(c!=null)return c.substring(1,c.length-1);for(const U in z){const D=z[U];if(D==null)continue;const _=i.find(J=>J.type===U);return D==="Do"&&_?.type==="day"?ne(Number(_.value)):D==="a"&&_?.type==="dayPeriod"?` ${(a("short").formatToParts(r).find(pe=>pe.type==="dayPeriod")??_)?.value??""}`:_?.value??""}return""})}function ye(r,t,e){const n=(typeof t=="number"?t:t.getTime())-(typeof r=="number"?r:r.getTime());switch(e){case"days":return Math.floor(n/(1e3*60*60*24));case"hours":return Math.floor(n/(1e3*60*60));case"minutes":return Math.floor(n/(1e3*60));case"seconds":return Math.floor(n/1e3);default:return n}}function te(r){if(r==null)return{localeMatcher:"best fit",dateStyle:"full",timeStyle:"short"};const t=q.exec(r);if(t?.groups!=null){const{dateStyle:n,timeStyle:o}=t.groups;return{localeMatcher:"best fit",dateStyle:n||"full",timeStyle:o||void 0}}const e={localeMatcher:"best fit"};for(const{groups:n}of r.matchAll(O))if(n!=null)for(const o in n){const s=n[o];if(s!=null)switch(o){case"year":e.year=s.length===4?"numeric":"2-digit";break;case"month":switch(s.length){case 4:e.month="long";break;case 3:e.month="short";break;case 2:e.month="2-digit";break;case 1:e.month="numeric";break}break;case"day":s==="DD"?e.day="2-digit":e.day="numeric";break;case"weekday":switch(s.length){case 4:e.weekday="long";break;case 3:e.weekday="short";break;case 2:e.weekday="narrow";break}break;case"hour":e.hour=s.length===2?"2-digit":"numeric",e.hour12=s==="hh"||s==="h";break;case"minute":e.minute=s.length===2?"2-digit":"numeric";break;case"second":e.second=s.length===2?"2-digit":"numeric";break;case"fractionalSecond":e.fractionalSecondDigits=3;break;case"dayPeriod":e.dayPeriod="narrow",e.hour12=!0,e.hourCycle="h12";break;case"timeZoneName":e.timeZoneName=s.length===2?"long":"short";break}}return e}const V=["th","st","nd","rd"];function ne(r){const t=r%100;return`${r}${V[(t-20)%10]??V[t]??V[0]}`}var d;(r=>{function t(o,s,a,i){let l=!1;if(typeof o=="string"){const u=function(g){const h=g?.target;!h?.matches(o)||a(g,h)};return document.addEventListener(s,u,i??!0),{dispose:()=>{l||(l=!0,document.removeEventListener(s,u,i??!0))}}}const c=function(u){a(u,this)};return o.addEventListener(s,c,i??!1),{dispose:()=>{l||(l=!0,o.removeEventListener(s,c,i??!1))}}}r.on=t;function e(o,s,a){const i=document.getElementById(o);if(s.replaceChildren(i?.content.cloneNode(!0)),s.className=i.className,a?.visible!=null){const l=s.querySelectorAll("[data-visible]");for(const c of l){const u=c.dataset.visible;!u||(a.visible[u]?c.style.display="initial":c.style.display="none")}}if(a?.bindings!=null){const l=s.querySelectorAll("[data-bind]");for(const c of l){const u=c.dataset.bind;if(!u)continue;const g=a.bindings[u];g!=null&&(c.textContent=String(g))}}}r.insertTemplate=e;function n(o){o.replaceChildren(),o.className=""}r.resetSlot=n})(d||(d={}));const oe=/^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\((-?\d+%?)[,\s]+(-?\d+%?)[,\s]+(-?\d+%?)[,\s]*(-?[\d.]+%?)?\))$/i;function A(r,t){const e=r+t,n=t<0?e<0?0:e:e>255?255:e;return Math.round(n)}function p(r,t){return f(r,-t)}function f(r,t){const e=T(r);if(e==null)return r;const[n,o,s,a]=e,i=255*t/100;return`rgba(${A(n,i)}, ${A(o,i)}, ${A(s,i)}, ${a})`}function v(r,t){const e=T(r);if(e==null)return r;const[n,o,s,a]=e;return`rgba(${n}, ${o}, ${s}, ${a*(t/100)})`}function be(r,t,e){const n=T(r),o=T(t);if(n==null||o==null)return r;const[s,a,i,l]=n,[c,u,g,h]=o;return`rgba(${$(s,c,e)}, ${$(a,u,e)}, ${$(i,g,e)}, ${$(l,h,e)})`}const $=(r,t,e)=>r+(t-r)*e/100;function T(r){r=r.trim();const t=oe.exec(r);if(t==null)return null;if(t[1]==="#"){const e=t[2];switch(e.length){case 3:return[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),1];case 6:return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),1]}return null}switch(t[3]){case"rgb":return[parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10),1];case"rgba":return[parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10),parseFloat(t[7])];default:return null}}function se(r){const t=()=>{const n=document.body,o=window.getComputedStyle(n),s=n.style;s.setProperty("--font-family",o.getPropertyValue("--vscode-font-family").trim()),s.setProperty("--font-size",o.getPropertyValue("--vscode-font-size").trim()),s.setProperty("--font-weight",o.getPropertyValue("--vscode-font-weight").trim()),s.setProperty("--editor-font-family",o.getPropertyValue("--vscode-editor-font-family").trim()),s.setProperty("--editor-font-size",o.getPropertyValue("--vscode-editor-font-size").trim()),s.setProperty("--editor-font-weight",o.getPropertyValue("--vscode-editor-font-weight").trim());const a=o.getPropertyValue("--vscode-editor-background").trim();let i=a;s.setProperty("--color-background",i),s.setProperty("--color-background--lighten-05",f(i,5)),s.setProperty("--color-background--darken-05",p(i,5)),s.setProperty("--color-background--lighten-075",f(i,7.5)),s.setProperty("--color-background--darken-075",p(i,7.5)),s.setProperty("--color-background--lighten-10",f(i,10)),s.setProperty("--color-background--darken-10",p(i,10)),s.setProperty("--color-background--lighten-15",f(i,15)),s.setProperty("--color-background--darken-15",p(i,15)),s.setProperty("--color-background--lighten-30",f(i,30)),s.setProperty("--color-background--darken-30",p(i,30)),s.setProperty("--color-background--lighten-50",f(i,50)),s.setProperty("--color-background--darken-50",p(i,50)),i=o.getPropertyValue("--vscode-button-background").trim(),s.setProperty("--color-button-background",i),s.setProperty("--color-button-background--darken-30",p(i,30)),i=o.getPropertyValue("--vscode-button-secondaryBackground").trim(),s.setProperty("--color-button-secondary-background",i),s.setProperty("--color-button-secondary-background--darken-30",p(i,30)),i=o.getPropertyValue("--vscode-button-background").trim(),s.setProperty("--color-highlight",i),s.setProperty("--color-highlight--75",v(i,75)),s.setProperty("--color-highlight--50",v(i,50)),s.setProperty("--color-highlight--25",v(i,25)),i=o.getPropertyValue("--vscode-button-foreground").trim(),s.setProperty("--color-button-foreground",i);let l=o.getPropertyValue("--vscode-editor-foreground").trim();l||(l=o.getPropertyValue("--vscode-foreground").trim()),s.setProperty("--color-foreground",l),s.setProperty("--color-foreground--85",v(l,85)),s.setProperty("--color-foreground--75",v(l,75)),s.setProperty("--color-foreground--65",v(l,65)),s.setProperty("--color-foreground--50",v(l,50)),i=o.getPropertyValue("--vscode-focusBorder").trim(),s.setProperty("--color-focus-border",i),i=o.getPropertyValue("--vscode-textLink-foreground").trim(),s.setProperty("--color-link-foreground",i),s.setProperty("--color-link-foreground--darken-20",p(i,20)),s.setProperty("--color-link-foreground--lighten-20",f(i,20)),i=o.getPropertyValue("--vscode-sideBar-background").trim(),s.setProperty("--color-view-background",i||a),i=o.getPropertyValue("--vscode-sideBar-foreground").trim(),s.setProperty("--color-view-foreground",i||l),s.setProperty("--color-view-header-foreground",o.getPropertyValue("--vscode-sideBarSectionHeader-foreground").trim()||i||l),i=o.getPropertyValue("--vscode-editorHoverWidget-background").trim(),s.setProperty("--color-hover-background",i),i=o.getPropertyValue("--vscode-editorHoverWidget-border").trim(),s.setProperty("--color-hover-border",i),i=o.getPropertyValue("--vscode-editorHoverWidget-foreground").trim(),s.setProperty("--color-hover-foreground",i),i=o.getPropertyValue("--vscode-editorHoverWidget-statusBarBackground").trim(),s.setProperty("--color-hover-statusBarBackground",i);const c=n.className.includes("vscode-light")||n.className.includes("vscode-high-contrast-light");i=o.getPropertyValue("--vscode-editor-background").trim(),s.setProperty("--graph-panel-bg",c?p(i,5):f(i,5)),s.setProperty("--graph-theme-opacity-factor",c?"0.5":"1"),r?.()},e=new MutationObserver(t);return e.observe(document.body,{attributes:!0,attributeFilter:["class"]}),t(),e}const ie=2**30;let C=0;function N(){return C===ie?C=1:C++,`webview:${C}`}class re{constructor(t){this.appName=t,this.state=window.bootstrap,window.bootstrap=void 0,this.log(`${this.appName}()`),this._api=acquireVsCodeApi(),se(this.onThemeUpdated?.bind(this)),requestAnimationFrame(()=>{this.log(`${this.appName}.initializing`);try{this.onInitialize?.(),this.bind(),this.onMessageReceived!=null&&window.addEventListener("message",this.onMessageReceived.bind(this)),this.sendCommand(Z,void 0),this.onInitialized?.()}finally{setTimeout(()=>{document.body.classList.remove("preload")},500)}})}bind(){this.bindDisposables?.forEach(t=>t.dispose()),this.bindDisposables=this.onBind?.()}log(t,...e){}getState(){return this._api.getState()}sendCommand(t,e){const n=N();return this.log(`${this.appName}.sendCommand(${n}): name=${t.method}`),this.postMessage({id:n,method:t.method,params:e})}sendCommandWithCompletion(t,e,n,o){const s=N();this.log(`${this.appName}.sendCommandWithCompletion(${s}): name=${t.method}`);const a=d.on(window,"message",i=>{x(n,i.data,l=>{l.completionId===s&&(a.dispose(),o(l))})});return this.postMessage({id:s,method:t.method,params:e})}setState(t){this.state=t,t!=null&&this._api.setState(t)}postMessage(t){this._api.postMessage(t)}}const R=new Date().getTimezoneOffset()/60*100,F=new Date(`Wed Jul 25 2018 19:18:00 GMT${R>=0?"-":"+"}${String(Math.abs(R)).padStart(4,"0")}`);class ae extends re{constructor(t){super(t),this._changes=Object.create(null),this._updating=!1}onInitialized(){this.updateState()}onBind(){const t=super.onBind?.()??[];return t.push(d.on("input[type=checkbox][data-setting]","change",(e,n)=>this.onInputChecked(n)),d.on("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]","blur",(e,n)=>this.onInputBlurred(n)),d.on("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]","focus",(e,n)=>this.onInputFocused(n)),d.on("input[type=text][data-setting][data-setting-preview], input[type=number][data-setting][data-setting-preview]","input",(e,n)=>this.onInputChanged(n)),d.on("button[data-setting-clear]","click",(e,n)=>this.onButtonClicked(n)),d.on("select[data-setting]","change",(e,n)=>this.onInputSelected(n)),d.on(".token[data-token]","mousedown",(e,n)=>this.onTokenMouseDown(n,e))),t}onMessageReceived(t){const e=t.data;switch(this.log(`${this.appName}.onMessageReceived(${e.id}): name=${e.method}`),e.method){case B.method:{x(B,e,n=>{this.scrollToAnchor(n.anchor,n.scrollBehavior)});break}case E.method:x(E,e,n=>{this.state.config=n.config,this.state.customSettings=n.customSettings,this.updateState()});break;default:super.onMessageReceived?.(t)}}applyChanges(){this.sendCommand(K,{changes:{...this._changes},removes:Object.keys(this._changes).filter(t=>this._changes[t]===void 0),scope:this.getSettingsScope()}),this._changes=Object.create(null)}getSettingsScope(){return"user"}onInputBlurred(t){this.log(`${this.appName}.onInputBlurred: name=${t.name}, value=${t.value}`);const e=document.getElementById(`${t.name}.popup`);e?.classList.add("hidden");let n=t.value;if((n==null||n.length===0)&&(n=t.dataset.defaultValue,n===void 0&&(n=null)),t.dataset.settingType==="arrayObject"){const o=t.name.split("."),s=o[0],a=parseInt(o[1],10),i=o.slice(2);let l=this.getSettingValue(s);if(n==null&&(l===void 0||l?.length===0))l!==void 0&&(this._changes[s]=void 0);else{l=l??[];let c=l[a];(n!=null||n==null&&c!==void 0)&&(c===void 0&&(c=Object.create(null),l[a]=c),w(c,i.join("."),t.type==="number"&&n!=null?Number(n):n),this._changes[s]=l)}}else this._changes[t.name]=t.type==="number"&&n!=null?Number(n):n;this.applyChanges()}onButtonClicked(t){if(t.dataset.settingType==="arrayObject"){const e=t.name.split("."),n=e[0],o=this.getSettingValue(n);if(o===void 0)return;const s=parseInt(e[1],10);if(o[s]==null)return;o.splice(s,1),this._changes[n]=o.length?o:void 0,this.applyChanges()}}onInputChanged(t){if(!this._updating)for(const e of document.querySelectorAll(`span[data-setting-preview="${t.name}"]`))this.updatePreview(e,t.value)}onInputChecked(t){if(!this._updating){switch(this.log(`${this.appName}.onInputChecked: name=${t.name}, checked=${t.checked}, value=${t.value}`),t.dataset.settingType){case"object":{const e=t.name.split("."),n=e.splice(0,1)[0],o=this.getSettingValue(n)??Object.create(null);t.checked?w(o,e.join("."),M(t.value)):w(o,e.join("."),!1),this._changes[n]=o;break}case"array":{const e=this.getSettingValue(t.name)??[];if(Array.isArray(e)){if(t.checked)e.includes(t.value)||e.push(t.value);else{const n=e.indexOf(t.value);n!==-1&&e.splice(n,1)}this._changes[t.name]=e}break}case"arrayObject":{const e=t.name.split("."),n=e[0],o=parseInt(e[1],10),s=e.slice(2),a=this.getSettingValue(n)??[],i=a[o]??Object.create(null);a[o]===void 0&&(a[o]=i),t.checked?w(a[o],s.join("."),M(t.value)):w(a[o],s.join("."),!1),this._changes[n]=a;break}case"custom":{this._changes[t.name]=t.checked;break}default:{t.checked?this._changes[t.name]=M(t.value):this._changes[t.name]=t.dataset.valueOff==null?!1:t.dataset.valueOff;break}}this.setAdditionalSettings(t.checked?t.dataset.addSettingsOn:t.dataset.addSettingsOff),this.applyChanges()}}onInputFocused(t){this.log(`${this.appName}.onInputFocused: name=${t.name}, value=${t.value}`);const e=document.getElementById(`${t.name}.popup`);if(e!=null){if(e.childElementCount===0){const n=document.querySelector("#token-popup")?.content.cloneNode(!0);n!=null&&e.appendChild(n)}e.classList.remove("hidden")}}onInputSelected(t){if(this._updating)return;const e=t.options[t.selectedIndex].value;this.log(`${this.appName}.onInputSelected: name=${t.name}, value=${e}`),this._changes[t.name]=H(e),this.applyChanges()}onTokenMouseDown(t,e){if(this._updating)return;this.log(`${this.appName}.onTokenClicked: id=${t.id}`);const n=t.closest(".setting");if(n==null)return;const o=n.querySelector("input[type=text], input:not([type])");if(o==null)return;const s=`\${${t.dataset.token}}`;let a=o.selectionStart;a!=null?(o.value=`${o.value.substring(0,a)}${s}${o.value.substr(o.selectionEnd??a)}`,a+=s.length):a=o.value.length,o.focus(),o.setSelectionRange(a,a),a===o.value.length&&(o.scrollLeft=o.scrollWidth),setTimeout(()=>this.onInputChanged(o),0),setTimeout(()=>o.focus(),250),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}scrollToAnchor(t,e,n){const o=document.getElementById(t);o!=null&&this.scrollTo(o,e,n)}scrollTo(t,e,n){const o=t.getBoundingClientRect().top-document.body.getBoundingClientRect().top-(n??0);window.scrollTo({top:o,behavior:e??"smooth"});const s=()=>{this._scrollTimer!=null&&clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(()=>{window.removeEventListener("scroll",s);const a=t.getBoundingClientRect().top-document.body.getBoundingClientRect().top-(n??0);o!==a&&this.scrollTo(t,e,n)},50)};window.addEventListener("scroll",s,!1)}evaluateStateExpression(t,e){let n=!1;for(const o of t.trim().split("&")){const[s,a,i]=ue(o);switch(a){case"=":{let l=e[s];l===void 0&&(l=this.getSettingValue(s)??!1),n=i!==void 0?i===String(l):Boolean(l);break}case"!":{let l=e[s];l===void 0&&(l=this.getSettingValue(s)??!1),n=i!==void 0?i!==String(l):!l;break}case"+":{if(i!==void 0){const l=this.getSettingValue(s);n=l!==void 0?l.includes(i.toString()):!1}break}}if(!n)break}return n}getCustomSettingValue(t){return this.state.customSettings?.[t]}getSettingValue(t){const e=this.getCustomSettingValue(t);return e??le(this.state.config,t)}updateState(){this.beforeUpdateState?.(),this._updating=!0,ee(this.state.config.defaultDateLocale);try{for(const e of document.querySelectorAll("input[type=checkbox][data-setting]"))if(e.dataset.settingType==="custom")e.checked=this.getCustomSettingValue(e.name)??!1;else if(e.dataset.settingType==="array")e.checked=(this.getSettingValue(e.name)??[]).includes(e.value);else if(e.dataset.valueOff!=null){const n=this.getSettingValue(e.name);e.checked=e.dataset.valueOff!==n}else e.checked=this.getSettingValue(e.name)??!1;for(const e of document.querySelectorAll("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]"))e.value=this.getSettingValue(e.name)??"";for(const e of document.querySelectorAll("select[data-setting]")){const n=this.getSettingValue(e.name),o=e.querySelector(`option[value='${n}']`);o!=null&&(o.selected=!0)}for(const e of document.querySelectorAll("span[data-setting-preview]"))this.updatePreview(e)}finally{this._updating=!1}const t=W(this.state.config);if(this.state.customSettings!=null)for(const[e,n]of Object.entries(this.state.customSettings))t[e]=n;this.setVisibility(t),this.setEnablement(t)}setAdditionalSettings(t){if(!t)return;const e=ce(t);for(const[n,o]of e)this._changes[n]=o}setEnablement(t){for(const e of document.querySelectorAll("[data-enablement]")){const n=!this.evaluateStateExpression(e.dataset.enablement,t);if(n?e.setAttribute("disabled",""):e.removeAttribute("disabled"),e.matches("input,select"))e.disabled=n;else{const o=e.querySelector("input,select");if(o==null)continue;o.disabled=n}}}setVisibility(t){for(const e of document.querySelectorAll("[data-visibility]"))e.classList.toggle("hidden",!this.evaluateStateExpression(e.dataset.visibility,t))}updatePreview(t,e){const n=t.dataset.settingPreviewType;switch(n){case"date":{e===void 0&&(e=this.getSettingValue(t.dataset.settingPreview)),e||(e=t.dataset.settingPreviewDefault),t.innerText=e==null?"":j(F,e,void 0,!1);break}case"date-locale":{e===void 0&&(e=this.getSettingValue(t.dataset.settingPreview)),e||(e=void 0);const o=this.getSettingValue(t.dataset.settingPreviewDefault)??"MMMM Do, YYYY h:mma";try{t.innerText=j(F,o,e,!1)}catch(s){t.innerText=s.message}break}case"commit":case"commit-uncommitted":{if(e===void 0&&(e=this.getSettingValue(t.dataset.settingPreview)),!e&&(e=t.dataset.settingPreviewDefault,e==null)){const o=t.dataset.settingPreviewDefaultLookup;o!=null&&(e=this.getSettingValue(o))}if(e==null){t.innerText="";return}this.sendCommandWithCompletion(G,{key:t.dataset.settingPreview,type:n,format:e},Q,o=>{t.innerText=o.preview??""});break}default:break}}}function H(r){return r==="true"?!0:r==="false"?!1:r==="null"?null:r}function le(r,t){return t.split(".").reduce((e={},n)=>e?.[n],r)}function w(r,t,e){const n=t.split("."),o=n.length,s=o-1;let a=-1,i=r;for(;i!=null&&++a<o;){const l=n[a];let c=e;if(a!==s){const u=i[l];c=typeof u=="object"?u:{}}i[l]=c,i=i[l]}return r}function ce(r){return r.trim().split(",").map(e=>{const[n,o]=e.split("=");return[n,H(o)]})}function ue(r){const[t,e,n]=r.trim().split(/([=+!])/);return[t.trim(),e!==void 0?e.trim():"=",n!==void 0?n.trim():n]}function W(r,t){const e={};for(const n in r){const o=r[n];Array.isArray(o)||(typeof o=="object"?Object.assign(e,W(o,t===void 0?n:`${t}.${n}`)):e[t===void 0?n:`${t}.${n}`]=o)}return e}function M(r){switch(r){case"on":return!0;case"null":return null;case"undefined":return;default:return r}}const Y=83;class de extends ae{constructor(){super("SettingsApp"),this._scopes=null,this._activeSection="general",this._sections=new Map}onInitialize(){const t=document.getElementById("scopes");if(t!=null&&this.state.scopes.length>1){for(const[o,s]of this.state.scopes){const a=document.createElement("option");a.value=o,a.innerHTML=s,this.state.scope===o&&(a.selected=!0),t.appendChild(a)}t.parentElement.parentElement.classList.remove("hidden"),this._scopes=t}let e=Y;const n=document.querySelector(".hero__area--sticky");n!=null&&(e=n.clientHeight),this._observer=new IntersectionObserver(this.onObserver.bind(this),{rootMargin:`-${e}px 0px 0px 0px`});for(const o of document.querySelectorAll("section[id]>.section__header"))this._sections.set(o.parentElement.id,!1),this._observer.observe(o);for(const o of document.querySelectorAll("[data-setting]")){!o.title&&o.type==="checkbox"&&(o.title=`Setting name: "gitlens.${o.name}"`);for(const s of document.querySelectorAll(`label[for="${o.id}"]`))s.title||(s.title=`Setting name: "gitlens.${o.name}"`)}}beforeUpdateState(){const t=document.activeElement?.id;this.renderAutolinks(),t?.startsWith("autolinks.")&&queueMicrotask(()=>{document.getElementById(t)?.focus()})}onBind(){const t=super.onBind?.()??[];return t.push(d.on(".section--collapsible>.section__header","click",(e,n)=>this.onSectionHeaderClicked(n,e)),d.on(".setting--expandable .setting__expander","click",(e,n)=>this.onSettingExpanderCicked(n,e)),d.on('a[data-action="jump"]',"mousedown",e=>{e.stopPropagation(),e.preventDefault()}),d.on('a[data-action="jump"]',"click",(e,n)=>this.onJumpToLinkClicked(n,e)),d.on("[data-action]","mousedown",e=>{e.stopPropagation(),e.preventDefault()}),d.on("[data-action]","click",(e,n)=>this.onActionLinkClicked(n,e))),t}scrollToAnchor(t,e){let n=Y;const o=document.querySelector(".hero__area--sticky");o!=null&&(n=o.clientHeight),super.scrollToAnchor(t,e,n)}onObserver(t,e){for(const o of t)this._sections.set(o.target.parentElement.id,o.isIntersecting);let n;for(const[o,s]of this._sections.entries())if(s){n=o;break}if(n===void 0){if(t.length!==1)return;const o=t[0];if(o.boundingClientRect==null||o.rootBounds==null)return;if(n=o.target.parentElement.id,o.boundingClientRect.top>=o.rootBounds.bottom){const s=[...this._sections.keys()],a=s.indexOf(n);if(a<=0)return;n=s[a-1]}}this._activeSection!==n&&(this._activeSection!==void 0&&this.toggleJumpLink(this._activeSection,!1),this._activeSection=n,this.toggleJumpLink(this._activeSection,!0))}getSettingsScope(){return this._scopes!=null?this._scopes.options[this._scopes.selectedIndex].value:"user"}onActionLinkClicked(t,e){switch(t.dataset.action){case"collapse":for(const n of document.querySelectorAll(".section--collapsible"))n.classList.add("collapsed");document.querySelector('[data-action="collapse"]').classList.add("hidden"),document.querySelector('[data-action="expand"]').classList.remove("hidden");break;case"expand":for(const n of document.querySelectorAll(".section--collapsible"))n.classList.remove("collapsed");document.querySelector('[data-action="collapse"]').classList.remove("hidden"),document.querySelector('[data-action="expand"]').classList.add("hidden");break;case"show":if(t.dataset.actionTarget)for(const n of document.querySelectorAll(`[data-region="${t.dataset.actionTarget}"]`))n.classList.remove("hidden"),n.querySelector("input,select,textarea,button")?.focus();break;case"hide":if(t.dataset.actionTarget)for(const n of document.querySelectorAll(`[data-region="${t.dataset.actionTarget}"]`))n.classList.add("hidden");break}e.preventDefault(),e.stopPropagation()}onInputSelected(t){t!==this._scopes&&super.onInputSelected(t)}onJumpToLinkClicked(t,e){const n=t.getAttribute("href");if(n==null)return;const o=n.substr(1);this.scrollToAnchor(o,"smooth"),e.stopPropagation(),e.preventDefault()}onSectionHeaderClicked(t,e){e.target.matches("a, input, label, i.icon__info")||t.parentElement.classList.toggle("collapsed")}onSettingExpanderCicked(t,e){t.parentElement.parentElement.classList.toggle("expanded")}toggleJumpLink(t,e){const n=document.querySelector(`a.sidebar__jump-link[href="#${t}"]`);n?.classList.toggle("active",e)}renderAutolinks(){const t=document.querySelector('[data-component="autolinks"]');if(t==null)return;const e=()=>`
			<div class="setting__hint">
				<span style="line-height: 2rem">
					<i class="icon icon--sm icon__info"></i> Matches prefixes that are followed by a reference value within commit messages.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The URL must contain a <code>&lt;num&gt;</code> for the reference value to be included in the link.
				</span>
			</div>
		`,n=(a,i,l=!1,c=!0)=>`
			<div class="setting${l?' hidden" data-region="autolink':""}">
				<div class="setting__group">
					<div class="setting__input setting__input--short setting__input--with-actions">
						<label for="autolinks.${a}.prefix">Prefix</label>
						<input
							id="autolinks.${a}.prefix"
							name="autolinks.${a}.prefix"
							placeholder="TICKET-"
							data-setting
							data-setting-type="arrayObject"
							${i?.prefix?`value="${encodeURIComponent(i.prefix)}"`:""}
						>
						<div class="setting__input-actions">
							<div class="toggle-button">
								<input
									id="autolinks.${a}.ignoreCase"
									name="autolinks.${a}.ignoreCase"
									type="checkbox"
									class="toggle-button__control"
									data-setting
									data-setting-type="arrayObject"
									${i?.ignoreCase?"checked":""}
								>
								<label class="toggle-button__label" for="autolinks.${a}.ignoreCase" title="Case-sensitive" aria-label="Case-sensitive">Aa</label>
							</div>
							<div class="toggle-button">
								<input
									id="autolinks.${a}.alphanumeric"
									name="autolinks.${a}.alphanumeric"
									type="checkbox"
									class="toggle-button__control"
									data-setting
									data-setting-type="arrayObject"
									${i?.alphanumeric?"checked":""}
								>
								<label class="toggle-button__label" for="autolinks.${a}.alphanumeric" title="Alphanumeric" aria-label="Alphanumeric">a1</label>
							</div>
						</div>
					</div>
					<div class="setting__input setting__input--long setting__input--centered">
						<label for="autolinks.${a}.url">URL</label>
						<input
							id="autolinks.${a}.url"
							name="autolinks.${a}.url"
							type="text"
							placeholder="https://example.com/TICKET?q=&lt;num&gt;"
							data-setting
							data-setting-type="arrayObject"
							${i?.url?`value="${encodeURIComponent(i.url)}"`:""}
						>
						${l?`
							<button
								class="button button--compact button--flat-subtle"
								type="button"
								data-action="hide"
								data-action-target="autolink"
								title="Delete"
								aria-label="Delete"
							><i class="codicon codicon-close"></i></button>
						`:`
							<button
								id="autolinks.${a}.delete"
								name="autolinks.${a}.delete"
								class="button button--compact button--flat-subtle"
								type="button"
								data-setting-type="arrayObject"
								data-setting-clear
								title="Delete"
								aria-label="Delete"
							><i class="codicon codicon-close"></i></button>
						`}
					</div>
				</div>
				${c&&l?e():""}
			</div>
		`,o=[],s=(this.state.config.autolinks?.length||0)>0;s&&this.state.config.autolinks?.forEach((a,i)=>o.push(n(i,a))),o.push(n(this.state.config.autolinks?.length??0,void 0,!0,!s)),s&&o.push(e()),t.innerHTML=o.join("")}}new de})();
