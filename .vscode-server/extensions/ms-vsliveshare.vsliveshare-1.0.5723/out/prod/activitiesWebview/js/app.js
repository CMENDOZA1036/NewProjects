(function(){"use strict";var t={293:function(t,e,i){var a=i(597),s=function(){var t=this,e=t._self._c;return e("div",{style:t.cssProps,attrs:{id:"app"}},[e("div",{staticClass:"vue-container"},[e("activities-section",{attrs:{activities:t.activities,users:t.users,localize:t.localize,searchText:t.searchText,userFilter:t.userFilter}}),e("activities-search",{attrs:{users:t.users,localize:t.localize,searchText:t.searchText,userFilter:t.userFilter},on:{searchTextUpdated:t.onSearchTextUpdated,userFilterUpdated:t.onUserFilterUpdated}})],1)])},r=[],c=i(534),n=i(457),l=i(73),o=i(320),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activities-section"},t._l(t.filteredActivities,(function(i){return e("div",{key:i.timestamp,attrs:{tabindex:"0"}},[e("activity-item",{attrs:{activity:i,users:t.users,localize:t.localize}})],1)})),0)},h=[],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activities-item"},[e("div",{staticClass:"activities-item-group"},[e("activity-item-message",{attrs:{data:t.activity.data,user:t.user,users:t.users,localize:t.localize}}),t._v(" Â  "),e("span",{staticClass:"timestamp"},[t._v(t._s(t.readableTimestamp))])],1),e("activity-item-action",{attrs:{activity:t.activity,localize:t.localize}}),e("div",{staticClass:"horizontal-line"})],1)},p=[];const v=acquireVsCodeApi();function m(t,e){v.postMessage({type:t,body:e})}function f(t){const e=new Date(1e3*+t);return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function y(t,e,i=null){return m("open",{userId:t,fileName:e,selection:i})}function b(t){return m("open_terminal",t)}function g(t,e){return m("diff",{fileName:t,timestamp:e})}var $=function(){var t=this,e=t._self._c;return e("span",{staticClass:"activities-item-message",domProps:{innerHTML:t._s(t.toDisplayMessage)}})},x=[],z={name:"activity-item-message",props:["data","user","users","localize"],computed:{toDisplayMessage(){let t;switch(this.data.type){case"fileOpen":t=this.localize("activities.fileOpen").replace("$(user)",`<b>${this.user}</b>`).replace("$(fileName)",`<i>${this.data.fileName}</i>`);break;case"textSelection":{const e=this.data.range[0],i=this.data.range[1],a=`${e.line+1}:${e.character+1}-${i.line+1}:${i.character+1}`,s=`${this.data.fileName}:${a}`;t=this.localize("activities.textSelection").replace("$(user)",`<b>${this.user}</b>`).replace("$(selection)",`<i>${s}</i>`);break}case"fileEdit":{let e=this.user;const i=this.data.coEditorIds;i.length>0&&(e+=this.formatCoEditorNames(i)),t=this.localize("activities.fileEdit").replace("$(user)",`<b>${e}</b>`).replace("$(fileName)",`<i>${this.data.fileName}</i>`);break}case"terminal":t=this.getTerminalDisplayMessage(this.data);break;default:t="";break}return t}},methods:{formatCoEditorNames(t){const e=t.map((t=>this.users[t])),i=e.pop(),a=e.join(", ");return""===a?` ${this.localize("and")} ${i}`:`, ${a} ${this.localize("and")} ${i}`},getTerminalDisplayMessage(t){const e=this.user,{terminal:i,action:a}=t;let s,r;switch(a){case"share":s=this.localize("activities.shareTerminal").replace("$(user)",`<b>${e}</b>`).replace("$(terminalId)",`<i>${i.id.toString()}</i>`);break;case"stop":s=this.localize("activities.stopSharingTerminal").replace("$(user)",`<b>${e}</b>`).replace("$(terminalId)",`<i>${i.id.toString()}</i>`),s=`<b>${e}</b> ${r}: ${i.id}`;break;case"changeAccess":{const t=i.options.readOnlyForGuests?"activities.terminalAccessChangeToReadOnly":"activities.terminalAccessChangeToReadWrite";s=this.localize(t).replace("$(user)",`<b>${e}</b>`).replace("$(terminalId)",`<i>${i.id.toString()}</i>`);break}case"executeCommand":s=this.localizedStrings["activities.executeTerminalCommand"].replace("$(user)",`<b>${e}</b>`).replace("$(terminalId)",`<i>${i.id.toString()}</i>`);break;default:s="";break}return s}}},T=z,_=i(942),F=(0,_.Z)(T,$,x,!1,null,null,null),k=F.exports,C=function(){var t=this,e=t._self._c;return e("a",{staticClass:"activities-item-action",on:{click:t.actionFunction}},[t._v(" "+t._s(t.text)+" ")])},w=[],A={name:"activities-item-action",props:["activity","localize"],data:function(){return{text:"",actionFunction:null}},created(){switch(this.activity.data.type){case"fileOpen":this.text=this.localize("Open file"),this.actionFunction=()=>y(this.activity.userId,this.activity.data.fileName);break;case"textSelection":this.text=this.localize("See selection(s)"),this.actionFunction=()=>y(this.activity.userId,this.activity.data.fileName,this.activity.data.range);break;case"fileEdit":this.text=this.localize("See edit(s)"),this.actionFunction=()=>g(this.activity.data.fileName,this.activity.timestamp);break;case"terminal":this.text=this.localize("Open terminal"),this.actionFunction=()=>b(this.activity.data.terminal);break;default:this.text="",this.actionFunction=()=>{};break}}},S=A,O=(0,_.Z)(S,C,w,!1,null,null,null),I=O.exports,U={name:"activity-item",props:["activity","users","localize"],components:{ActivityItemMessage:k,ActivityItemAction:I},computed:{readableTimestamp(){return f(this.activity.timestamp)},user(){return this.users[this.activity.userId.toString()]||null}}},N=U,L=(0,_.Z)(N,d,p,!1,null,null,null),j=L.exports,E={name:"activities-section",props:["activities","users","searchText","userFilter","localize"],components:{ActivityItem:j},data:function(){return{activitiesCurrentLength:0}},computed:{filteredActivities(){let t=this.activities;return t=""===this.searchText.trim()?this.activities.filter((t=>this.userFilterIncludesActivity(t))):this.activities.filter((t=>this.userFilterIncludesActivity(t)&&(this.checkActivityByType(t)||this.checkActivityByFile(t)))),t}},updated(){const t=this.activities.length;t!==this.activitiesCurrentLength&&(this.activitiesCurrentLength=t,this.$el.scrollTop=this.$el.scrollHeight)},methods:{checkActivityByType(t){return t.data.type.toLowerCase().includes(this.searchText.toLowerCase().trim())},checkActivityByFile(t){if(!Object.prototype.hasOwnProperty.call(t.data,"fileName"))return!1;const e=t.data.fileName.toLowerCase().split("/").pop();return e.startsWith(this.searchText.toLowerCase().trim())},userFilterIncludesActivity(t){const e=this.localize("All users");return this.userFilter===e||this.users[t.userId]===this.userFilter}},mounted(){m("is_ready")}},M=E,P=(0,_.Z)(M,u,h,!1,null,"627fc729",null),Z=P.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"activities-search"},[e("vscode-dropdown",{staticClass:"search-dropdown",attrs:{value:t.userFilter},on:{change:t.onUserFilterUpdated}},[e("vscode-option",[t._v(t._s(t.localize("All users")))]),t._l(t.usersArray,(function(i){return e("vscode-option",{key:i,attrs:{value:i}},[t._v(" "+t._s(i)+" ")])}))],2),e("vscode-text-field",{staticClass:"search-input",attrs:{type:"text",value:t.searchText,placeholder:t.placeholder},on:{input:t.onSearchTextUpdated}})],1)},D=[],W={name:"activities-search",props:["users","searchText","userFilter","localize"],computed:{usersArray(){return Object.values(this.users)},placeholder(){return this.localize("Search")}},methods:{onSearchTextUpdated(t){this.$emit("searchTextUpdated",t)},onUserFilterUpdated(t){this.$emit("userFilterUpdated",t)}}},G=W,H=(0,_.Z)(G,B,D,!1,null,"22a98cd6",null),R=H.exports;(0,c.o)().register((0,n.TG)(),(0,l.E)(),(0,o.WB)());var q={name:"app",props:["data"],components:{ActivitiesSection:Z,ActivitiesSearch:R},data(){return{userFilter:"",searchText:""}},computed:{activities(){return this.data?this.data.activities:[]},users(){return this.data?this.data.users:{}},localizedStrings(){return this.data?this.data.localizedStrings:{}},cssProps(){return{"--chat-code-font-family":this.data?this.data.css.fontFamily:"monospace","--chat-font-size":this.data?`${this.data.css.fontSize}px`:"12px"}}},methods:{onSearchTextUpdated(t){this.searchText=t.target.value},onUserFilterUpdated(t){this.userFilter=t.target.value},localize(t){return this.localizedStrings[t]||t}},mounted(){this.userFilter=this.localize("All users")}},V=q,J=(0,_.Z)(V,s,r,!1,null,null,null),K=J.exports,Q=new a.ZP({template:'<app :data="data"> </app>',props:["data"],components:{App:K},el:"#app"});window.addEventListener("message",(t=>{Q.data=t.data}))}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,i),r.exports}i.m=t,function(){var t=[];i.O=function(e,a,s,r){if(!a){var c=1/0;for(u=0;u<t.length;u++){a=t[u][0],s=t[u][1],r=t[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||c>=r)&&Object.keys(i.O).every((function(t){return i.O[t](a[l])}))?a.splice(l--,1):(n=!1,r<c&&(c=r));if(n){t.splice(u--,1);var o=s();void 0!==o&&(e=o)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,s,r]}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,r,c=a[0],n=a[1],l=a[2],o=0;if(c.some((function(e){return 0!==t[e]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(l)var u=l(i)}for(e&&e(a);o<c.length;o++)r=c[o],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(u)},a=self["webpackChunk_vs_liveshare_activity_webview"]=self["webpackChunk_vs_liveshare_activity_webview"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[998],(function(){return i(293)}));a=i.O(a)})();
//# sourceMappingURL=app.js.map