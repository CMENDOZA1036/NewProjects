"use strict";var ei=Object.defineProperty;var s=(fe,I)=>ei(fe,"name",{value:I,configurable:!0});exports.id=913;exports.ids=[913];exports.modules={6268:(fe,I)=>{var O;O={value:!0},I.n=void 0;var le;(function(p){p[p.NONE=0]="NONE",p[p.ERROR=30]="ERROR",p[p.WARN=50]="WARN",p[p.INFO=60]="INFO",p[p.DEBUG=70]="DEBUG",p[p.VERBOSE=80]="VERBOSE",p[p.ALL=9999]="ALL"})(le=I.n||(I.n={}))},1641:(fe,I,O)=>{O.r(I),O.d(I,{OpenTelemetryProvider:()=>jt});var le=typeof globalThis=="object"?globalThis:global,p="1.3.0",ke=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Xt(e){var t=new Set([e]),r=new Set,n=e.match(ke);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(a.prerelease!=null)return s(function(_){return _===e},"isExactmatch");function i(u){return r.add(u),!1}s(i,"_reject");function o(u){return t.add(u),!0}return s(o,"_accept"),s(function(_){if(t.has(_))return!0;if(r.has(_))return!1;var c=_.match(ke);if(!c)return i(_);var E={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return E.prerelease!=null||a.major!==E.major?i(_):a.major===0?a.minor===E.minor&&a.patch<=E.patch?o(_):i(_):a.minor<=E.minor?o(_):i(_)},"isCompatible")}s(Xt,"_makeCompatibilityCheck");var Yt=Xt(p),Kt=p.split(".")[0],H=Symbol.for("opentelemetry.js.api."+Kt),j=le;function z(e,t,r,n){var a;n===void 0&&(n=!1);var i=j[H]=(a=j[H])!==null&&a!==void 0?a:{version:p};if(!n&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(i.version!==p){var o=new Error("@opentelemetry/api: All API registration versions must match");return r.error(o.stack||o.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+p+"."),!0}s(z,"registerGlobal");function w(e){var t,r,n=(t=j[H])===null||t===void 0?void 0:t.version;if(!(!n||!Yt(n)))return(r=j[H])===null||r===void 0?void 0:r[e]}s(w,"getGlobal");function Q(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+p+".");var r=j[H];r&&delete r[e]}s(Q,"unregisterGlobal");var kt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Wt=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},zt=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return s(e,"DiagComponentLogger"),e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("verbose",this._namespace,t)},e}();function F(e,t,r){var n=w("diag");if(!!n)return r.unshift(t),n[e].apply(n,Wt([],kt(r),!1))}s(F,"logProxy");var d;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(d||(d={}));function Qt(e,t){e<d.NONE?e=d.NONE:e>d.ALL&&(e=d.ALL),t=t||{};function r(n,a){var i=t[n];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return s(r,"_filterFunc"),{error:r("error",d.ERROR),warn:r("warn",d.WARN),info:r("info",d.INFO),debug:r("debug",d.DEBUG),verbose:r("verbose",d.VERBOSE)}}s(Qt,"createLogLevelDiagLogger");var Zt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Jt=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},qt="diag",C=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=w("diag");if(!!u)return u[a].apply(u,Jt([],Zt(i),!1))}}s(t,"_logProxy");var r=this,n=s(function(a,i){var o,u,_;if(i===void 0&&(i={logLevel:d.INFO}),a===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var E=w("diag"),A=Qt((u=i.logLevel)!==null&&u!==void 0?u:d.INFO,a);if(E&&!i.suppressOverrideMessage){var l=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";E.warn("Current logger will be overwritten from "+l),A.warn("Current logger will overwrite one already registered from "+l)}return z("diag",A,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){Q(qt,r)},r.createComponentLogger=function(a){return new zt(a)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return s(e,"DiagAPI"),e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),f=C.instance(),pe=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],$t=function(){function e(){function t(n){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,a)}}}s(t,"_consoleFunc");for(var r=0;r<pe.length;r++)this[pe[r].n]=t(pe[r].c)}return s(e,"DiagConsoleLogger"),e}();function de(e){return Symbol.for(e)}s(de,"createContextKey");var er=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,a){var i=new e(r._currentContext);return i._currentContext.set(n,a),i},r.deleteValue=function(n){var a=new e(r._currentContext);return a._currentContext.delete(n),a}}return s(e,"BaseContext"),e}(),tr=new er,rr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},nr=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},ar=function(){function e(){}return s(e,"NoopContextManager"),e.prototype.active=function(){return tr},e.prototype.with=function(t,r,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return r.call.apply(r,nr([n],rr(a),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),ir=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},or=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Te="context",sr=new ar,Se=function(){function e(){}return s(e,"ContextAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return z(Te,t,C.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,or([t,r,n],ir(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return w(Te)||sr},e.prototype.disable=function(){this._getContextManager().disable(),Q(Te,C.instance())},e}(),g;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(g||(g={}));var We="0000000000000000",ze="00000000000000000000000000000000",Qe={traceId:ze,spanId:We,traceFlags:g.NONE},X=function(){function e(t){t===void 0&&(t=Qe),this._spanContext=t}return s(e,"NonRecordingSpan"),e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}(),Ae=de("OpenTelemetry Context Key SPAN");function he(e){return e.getValue(Ae)||void 0}s(he,"getSpan");function ur(){return he(Se.getInstance().active())}s(ur,"getActiveSpan");function ve(e,t){return e.setValue(Ae,t)}s(ve,"setSpan");function _r(e){return e.deleteValue(Ae)}s(_r,"deleteSpan");function cr(e,t){return ve(e,new X(t))}s(cr,"setSpanContext");function Ze(e){var t;return(t=he(e))===null||t===void 0?void 0:t.spanContext()}s(Ze,"getSpanContext");var Er=/^([0-9a-f]{32})$/i,fr=/^[0-9a-f]{16}$/i;function Je(e){return Er.test(e)&&e!==ze}s(Je,"isValidTraceId");function lr(e){return fr.test(e)&&e!==We}s(lr,"isValidSpanId");function Z(e){return Je(e.traceId)&&lr(e.spanId)}s(Z,"isSpanContextValid");function pr(e){return new X(e)}s(pr,"wrapSpanContext");var qe=Se.getInstance(),$e=function(){function e(){}return s(e,"NoopTracer"),e.prototype.startSpan=function(t,r,n){var a=Boolean(r?.root);if(a)return new X;var i=n&&Ze(n);return dr(i)&&Z(i)?new X(i):new X},e.prototype.startActiveSpan=function(t,r,n,a){var i,o,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=n):(i=r,o=n,u=a);var _=o??qe.active(),c=this.startSpan(t,i,_),E=ve(_,c);return qe.with(E,u,void 0,c)}},e}();function dr(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}s(dr,"isSpanContext");var Tr=new $e,Sr=function(){function e(t,r,n,a){this._provider=t,this.name=r,this.version=n,this.options=a}return s(e,"ProxyTracer"),e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Tr},e}(),Ar=function(){function e(){}return s(e,"NoopTracerProvider"),e.prototype.getTracer=function(t,r,n){return new $e},e}(),hr=new Ar,et=function(){function e(){}return s(e,"ProxyTracerProvider"),e.prototype.getTracer=function(t,r,n){var a;return(a=this.getDelegateTracer(t,r,n))!==null&&a!==void 0?a:new Sr(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:hr},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,r,n)},e}(),Oe="trace",vr=function(){function e(){this._proxyTracerProvider=new et,this.wrapSpanContext=pr,this.isSpanContextValid=Z,this.deleteSpan=_r,this.getSpan=he,this.getActiveSpan=ur,this.getSpanContext=Ze,this.setSpan=ve,this.setSpanContext=cr}return s(e,"TraceAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=z(Oe,this._proxyTracerProvider,C.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return w(Oe)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Q(Oe,C.instance()),this._proxyTracerProvider=new et},e}(),m=vr.getInstance(),Or=O(6268),mr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Rr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gr=function(){function e(t){this._entries=t?new Map(t):new Map}return s(e,"BaggageImpl"),e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=mr(t,2),n=r[0],a=r[1];return[n,a]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=new e(this._entries);try{for(var o=Rr(n),u=o.next();!u.done;u=o.next()){var _=u.value;i._entries.delete(_)}}catch(c){t={error:c}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),yr=Symbol("BaggageEntryMetadata"),Nr=C.instance();function Pr(e){return e===void 0&&(e={}),new gr(new Map(Object.entries(e)))}s(Pr,"createBaggage");function Ir(e){return typeof e!="string"&&(Nr.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:yr,toString:function(){return e}}}s(Ir,"baggageEntryMetadataFromString");var Cr="=",me=";",J=",",Re="baggage",Lr=180,br=4096,Dr=8192,Mr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function wr(e){return e.reduce(function(t,r){var n=""+t+(t!==""?J:"")+r;return n.length>Dr?t:n},"")}s(wr,"serializeKeyPairs");function Ur(e){return e.getAllEntries().map(function(t){var r=Mr(t,2),n=r[0],a=r[1],i=encodeURIComponent(n)+"="+encodeURIComponent(a.value);return a.metadata!==void 0&&(i+=me+a.metadata.toString()),i})}s(Ur,"getKeyPairs");function tt(e){var t=e.split(me);if(!(t.length<=0)){var r=t.shift();if(!!r){var n=r.split(Cr);if(n.length===2){var a=decodeURIComponent(n[0].trim()),i=decodeURIComponent(n[1].trim()),o;return t.length>0&&(o=Ir(t.join(me))),{key:a,value:i,metadata:o}}}}}s(tt,"parsePairKeyValue");function rt(e){return typeof e!="string"||e.length===0?{}:e.split(J).map(function(t){return tt(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,r){return t[r.key]=r.value,t},{})}s(rt,"parseKeyPairsIntoRecord");var Br=O(2037),y;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(y||(y={}));var xr=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Gr=",",Vr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Hr(e){return Vr.indexOf(e)>-1}s(Hr,"isEnvVarANumber");var jr=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Fr(e){return jr.indexOf(e)>-1}s(Fr,"isEnvVarAList");var ge=1/0,ye=128,nt={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:d.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ge,OTEL_ATTRIBUTE_COUNT_LIMIT:ye,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ge,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ye,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"otlp",OTEL_TRACES_SAMPLER:y.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Xr(e,t,r,n,a){if(n===void 0&&(n=-1/0),a===void 0&&(a=1/0),typeof r[e]<"u"){var i=Number(r[e]);isNaN(i)||(i<n?t[e]=n:i>a?t[e]=a:t[e]=i)}}s(Xr,"parseNumber");function Yr(e,t,r,n){n===void 0&&(n=Gr);var a=r[e];typeof a=="string"&&(t[e]=a.split(n).map(function(i){return i.trim()}))}s(Yr,"parseStringList");var Kr={ALL:d.ALL,VERBOSE:d.VERBOSE,DEBUG:d.DEBUG,INFO:d.INFO,WARN:d.WARN,ERROR:d.ERROR,NONE:d.NONE};function kr(e,t,r){var n=r[e];if(typeof n=="string"){var a=Kr[n.toUpperCase()];a!=null&&(t[e]=a)}}s(kr,"setLogLevelFromEnv");function Ne(e){var t={};for(var r in nt){var n=r;switch(n){case"OTEL_LOG_LEVEL":kr(n,t,e);break;default:if(Hr(n))Xr(n,t,e);else if(Fr(n))Yr(n,t,e);else{var a=e[n];typeof a<"u"&&a!==null&&(t[n]=String(a))}}}return t}s(Ne,"parseEnvironment");function Wr(){return Ne(typeof process<"u"?process.env:xr)}s(Wr,"getEnvWithoutDefaults");function T(){var e=Ne(process.env);return Object.assign({HOSTNAME:Br.hostname()},nt,e)}s(T,"getEnv");var zr=function(){function e(){var t=this;this._promise=new Promise(function(r,n){t._resolve=r,t._reject=n})}return s(e,"Deferred"),Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),Qr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Zr=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Pe=function(){function e(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new zr}return s(e,"BindOnceFuture"),Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,r=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,Zr([this._that],Qr(n),!1))).then(function(i){return r._deferred.resolve(i)},function(i){return r._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},e}(),P;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(P||(P={}));var Jr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},at=1e4;function qr(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(r){var n=Jr(r,2),a=n[0],i=n[1];typeof i<"u"?t[a]=String(i):f.warn('Header "'+a+'" has wrong value and will be ignored')}),t}s(qr,"parseHeaders");function $r(e,t){return e.endsWith("/")||(e=e+"/"),e+t}s($r,"appendResourcePathToUrl");function en(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return f.warn("Could not parse export URL: '"+e+"'"),e}}s(en,"appendRootPathToUrlIfNeeded");function tn(e){return typeof e=="number"?e<=0?it(e,at):e:rn()}s(tn,"configureExporterTimeout");function rn(){var e,t=Number((e=T().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:T().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?it(t,at):t}s(rn,"getExporterTimeoutFromEnv");function it(e,t){return f.warn("Timeout must be greater than 0",e),t}s(it,"invalidTimeout");var nn=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Pe(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=tn(t.timeoutMillis),this.onInit(t)}return s(e,"OTLPExporterBase"),e.prototype.export=function(t,r){if(this._shutdownOnce.isCalled){r({code:P.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:P.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){r({code:P.SUCCESS})}).catch(function(n){r({code:P.FAILED,error:n})})},e.prototype._export=function(t){var r=this;return new Promise(function(n,a){try{f.debug("items to be sent",t),r.send(t,n,a)}catch(i){a(i)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return f.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},e}(),ot=O(7310),st=O(3685),ut=O(5687),an=O(9796),on=O(2781),U;(function(e){e.NONE="none",e.GZIP="gzip"})(U||(U={}));var sn=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ie=function(e){sn(t,e);function t(r,n,a){var i=e.call(this,r)||this;return i.name="OTLPExporterError",i.data=a,i.code=n,i}return s(t,"OTLPExporterError"),t}(Error),q=function(){return q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},q.apply(this,arguments)};function un(e,t,r,n,a){var i=e.timeoutMillis,o=new ot.URL(e.url),u,_=Number(process.versions.node.split(".")[0]),c=setTimeout(function(){u=!0,_>=14?l.destroy():l.abort()},i),E={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:q({"Content-Type":r},e.headers),agent:e.agent},A=o.protocol==="http:"?st.request:ut.request,l=A(E,function(S){var N="";S.on("data",function(R){return N+=R}),S.on("aborted",function(){if(u){var R=new Ie("Request Timeout");a(R)}}),S.on("end",function(){if(!u){if(S.statusCode&&S.statusCode<299)f.debug("statusCode: "+S.statusCode,N),n();else{var R=new Ie(S.statusMessage,S.statusCode,N);a(R)}clearTimeout(c)}})});switch(l.on("error",function(S){if(u){var N=new Ie("Request Timeout",S.code);a(N)}else clearTimeout(c),a(S)}),e.compression){case U.GZIP:{l.setHeader("Content-Encoding","gzip");var v=_n(t);v.on("error",a).pipe(an.createGzip()).on("error",a).pipe(l);break}default:l.end(t);break}}s(un,"sendWithHttp");function _n(e){var t=new on.Readable;return t.push(e),t.push(null),t}s(_n,"readableFromBuffer");function cn(e){if(e.httpAgentOptions&&e.keepAlive===!1){f.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{var t=new ot.URL(e.url),r=t.protocol==="http:"?st.Agent:ut.Agent;return new r(q({keepAlive:!0},e.httpAgentOptions))}catch(n){f.error("collector exporter failed to create http agent. err: "+n.message);return}}s(cn,"createHttpAgent");function En(e){if(e)return e;var t=T().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||T().OTEL_EXPORTER_OTLP_COMPRESSION;return t===U.GZIP?U.GZIP:U.NONE}s(En,"configureCompression");var fn=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ln=function(e){fn(t,e);function t(r){r===void 0&&(r={});var n=e.call(this,r)||this;return n.DEFAULT_HEADERS={},r.metadata&&f.warn("Metadata cannot be set when using http"),n.headers=Object.assign(n.DEFAULT_HEADERS,qr(r.headers),rt(T().OTEL_EXPORTER_OTLP_HEADERS)),n.agent=cn(r),n.compression=En(r.compression),n}return s(t,"OTLPExporterNodeBase"),t.prototype.onInit=function(r){},t.prototype.send=function(r,n,a){var i=this;if(this._shutdownOnce.isCalled){f.debug("Shutdown already started. Cannot send objects");return}var o=this.convert(r),u=new Promise(function(c,E){un(i,JSON.stringify(o),"application/json",c,E)}).then(n,a);this._sendingPromises.push(u);var _=s(function(){var c=i._sendingPromises.indexOf(u);i._sendingPromises.splice(c,1)},"popPromise");u.then(_,_)},t.prototype.onShutdown=function(){},t}(nn),pn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function $(e){return Object.keys(e).map(function(t){return _t(t,e[t])})}s($,"toAttributes");function _t(e,t){return{key:e,value:ct(t)}}s(_t,"toKeyValue");function ct(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(ct)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(r){var n=pn(r,2),a=n[0],i=n[1];return _t(a,i)})}}:{}}s(ct,"toAnyValue");function ti(e){var t,r=(t=e.match(/[\da-f]{2}/gi))===null||t===void 0?void 0:t.map(function(n){return parseInt(n,16)});return r&&new Uint8Array(r)}s(ti,"hexToBuf");function dn(e){return("0"+e.toString(16)).slice(-2)}s(dn,"i2hex");function ri(e){if(!(e==null||e.length===0))return Array.from(e).map(dn).join("")}s(ri,"bufToHex");var Tn=O(4074),ee=Tn.performance,Ce=9,Y=Math.pow(10,Ce);function te(e){var t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(Ce))*Y;return[r,n]}s(te,"numberToHrtime");function Et(){var e=ee.timeOrigin;if(typeof e!="number"){var t=ee;e=t.timing&&t.timing.fetchStart}return e}s(Et,"getTimeOrigin");function Sn(e){var t=te(Et()),r=te(typeof e=="number"?e:ee.now()),n=t[0]+r[0],a=t[1]+r[1];return a>Y&&(a-=Y,n+=1),[n,a]}s(Sn,"hrTime");function Le(e){if(lt(e))return e;if(typeof e=="number")return e<Et()?Sn(e):te(e);if(e instanceof Date)return te(e.getTime());throw TypeError("Invalid input type")}s(Le,"timeInputToHrTime");function An(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Y),[r,n]}s(An,"hrTimeDuration");function ni(e){var t=Ce,r=""+"0".repeat(t)+e[1]+"Z",n=r.substr(r.length-t-1),a=new Date(e[0]*1e3).toISOString();return a.replace("000Z",n)}s(ni,"hrTimeToTimeStamp");function be(e){return e[0]*Y+e[1]}s(be,"hrTimeToNanoseconds");function ai(e){return Math.round(e[0]*1e3+e[1]/1e6)}s(ai,"hrTimeToMilliseconds");function ft(e){return Math.round(e[0]*1e6+e[1]/1e3)}s(ft,"hrTimeToMicroseconds");function lt(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}s(lt,"isTimeInputHrTime");function hn(e){return lt(e)||typeof e=="number"||e instanceof Date}s(hn,"isTimeInput");function pt(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}s(pt,"intValue");var vn=Buffer.alloc(8),On=Buffer.alloc(16);function K(e){var t;e.length===16?t=vn:e.length===32?t=On:t=Buffer.alloc(e.length/2);for(var r=0,n=0;n<e.length;n+=2){var a=pt(e.charCodeAt(n)),i=pt(e.charCodeAt(n+1));t.writeUInt8(a<<4|i,r++)}return t.toString("base64")}s(K,"hexToBase64");function mn(e,t){var r=e.spanContext(),n=e.status,a=t?e.parentSpanId:e.parentSpanId!=null?K(e.parentSpanId):void 0;return{traceId:t?r.traceId:K(r.traceId),spanId:t?r.spanId:K(r.spanId),parentSpanId:a,name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:be(e.startTime),endTimeUnixNano:be(e.endTime),attributes:$(e.attributes),droppedAttributesCount:0,events:e.events.map(gn),droppedEventsCount:0,status:{code:n.code,message:n.message},links:e.links.map(function(i){return Rn(i,t)}),droppedLinksCount:0}}s(mn,"sdkSpanToOtlpSpan");function Rn(e,t){return{attributes:e.attributes?$(e.attributes):[],spanId:t?e.context.spanId:K(e.context.spanId),traceId:t?e.context.traceId:K(e.context.traceId),droppedAttributesCount:0}}s(Rn,"toOtlpLink");function gn(e){return{attributes:e.attributes?$(e.attributes):[],name:e.name,timeUnixNano:be(e.time),droppedAttributesCount:0}}s(gn,"toOtlpSpanEvent");var yn=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function Pn(e,t){return{resourceSpans:Cn(e,t)}}s(Pn,"createExportTraceServiceRequest");function In(e){var t,r,n=new Map;try{for(var a=yn(e),i=a.next();!i.done;i=a.next()){var o=i.value,u=n.get(o.resource);u||(u=new Map,n.set(o.resource,u));var _=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),c=u.get(_);c||(c=[],u.set(_,c)),c.push(o)}}catch(E){t={error:E}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}s(In,"createResourceMap");function Cn(e,t){for(var r=In(e),n=[],a=r.entries(),i=a.next();!i.done;){for(var o=Nn(i.value,2),u=o[0],_=o[1],c=[],E=_.values(),A=E.next();!A.done;){var l=A.value;if(l.length>0){var v=l[0].instrumentationLibrary,S=v.name,N=v.version,R=v.schemaUrl,Ke=l.map(function(Ee){return mn(Ee,t)});c.push({scope:{name:S,version:N},spans:Ke,schemaUrl:R})}A=E.next()}var ce={resource:{attributes:$(u.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};n.push(ce),i=a.next()}return n}s(Cn,"spanRecordsToResourceSpans");var Ln=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dt="v1/traces",bn="http://localhost:4318/"+dt,Dn=function(e){Ln(t,e);function t(r){r===void 0&&(r={});var n=e.call(this,r)||this;return n.headers=Object.assign(n.headers,rt(T().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return s(t,"OTLPTraceExporter"),t.prototype.convert=function(r){return Pn(r,!0)},t.prototype.getDefaultUrl=function(r){return typeof r.url=="string"?r.url:T().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?en(T().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):T().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?$r(T().OTEL_EXPORTER_OTLP_ENDPOINT,dt):bn},t}(ln),h={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},ii={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},oi={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},si={EC2:"ec2",FARGATE:"fargate"},ui={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},_i={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},Mn={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},wn="1.8.0",B,De=(B={},B[h.TELEMETRY_SDK_NAME]="opentelemetry",B[h.PROCESS_RUNTIME_NAME]="node",B[h.TELEMETRY_SDK_LANGUAGE]=Mn.NODEJS,B[h.TELEMETRY_SDK_VERSION]=wn,B);function Un(){return"unknown_service:"+process.argv0}s(Un,"defaultServiceName");var Me=function(){function e(t){this.attributes=t}return s(e,"Resource"),e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[h.SERVICE_NAME]=Un(),t[h.TELEMETRY_SDK_LANGUAGE]=De[h.TELEMETRY_SDK_LANGUAGE],t[h.TELEMETRY_SDK_NAME]=De[h.TELEMETRY_SDK_NAME],t[h.TELEMETRY_SDK_VERSION]=De[h.TELEMETRY_SDK_VERSION],t))},e.prototype.merge=function(t){if(!t||!Object.keys(t.attributes).length)return this;var r=Object.assign({},this.attributes,t.attributes);return new e(r)},e.EMPTY=new e({}),e}(),L=Se.getInstance(),Bn=function(){function e(){}return s(e,"NoopTextMapPropagator"),e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}(),xn={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},Gn={set:function(e,t,r){e!=null&&(e[t]=r)}},we=de("OpenTelemetry Baggage Key");function Vn(e){return e.getValue(we)||void 0}s(Vn,"getBaggage");function Hn(e,t){return e.setValue(we,t)}s(Hn,"setBaggage");function jn(e){return e.deleteValue(we)}s(jn,"deleteBaggage");var Ue="propagation",Fn=new Bn,Xn=function(){function e(){this.createBaggage=Pr,this.getBaggage=Vn,this.setBaggage=Hn,this.deleteBaggage=jn}return s(e,"PropagationAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return z(Ue,t,C.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=Gn),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=xn),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Q(Ue,C.instance())},e.prototype._getGlobalPropagator=function(){return w(Ue)||Fn},e}(),re=Xn.getInstance(),Yn="[object Object]",Kn="[object Null]",kn="[object Undefined]",Wn=Function.prototype,Tt=Wn.toString,zn=Tt.call(Object),Qn=Zn(Object.getPrototypeOf,Object),St=Object.prototype,At=St.hasOwnProperty,b=Symbol?Symbol.toStringTag:void 0,ht=St.toString;function Zn(e,t){return function(r){return e(t(r))}}s(Zn,"overArg");function vt(e){if(!Jn(e)||qn(e)!==Yn)return!1;var t=Qn(e);if(t===null)return!0;var r=At.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Tt.call(r)===zn}s(vt,"isPlainObject");function Jn(e){return e!=null&&typeof e=="object"}s(Jn,"isObjectLike");function qn(e){return e==null?e===void 0?kn:Kn:b&&b in Object(e)?$n(e):ea(e)}s(qn,"baseGetTag");function $n(e){var t=At.call(e,b),r=e[b],n=!1;try{e[b]=void 0,n=!0}catch{}var a=ht.call(e);return n&&(t?e[b]=r:delete e[b]),a}s($n,"getRawTag");function ea(e){return ht.call(e)}s(ea,"objectToString");var ta=20;function ra(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=Ot(r,e.shift(),0,n);return r}s(ra,"merge");function Be(e){return ne(e)?e.slice():e}s(Be,"takeValue");function Ot(e,t,r,n){r===void 0&&(r=0);var a;if(!(r>ta)){if(r++,ae(e)||ae(t)||Rt(t))a=Be(t);else if(ne(e)){if(a=e.slice(),ne(t))for(var i=0,o=t.length;i<o;i++)a.push(Be(t[i]));else if(k(t))for(var u=Object.keys(t),i=0,o=u.length;i<o;i++){var _=u[i];a[_]=Be(t[_])}}else if(k(e))if(k(t)){if(!na(e,t))return t;a=Object.assign({},e);for(var u=Object.keys(t),i=0,o=u.length;i<o;i++){var _=u[i],c=t[_];if(ae(c))typeof c>"u"?delete a[_]:a[_]=c;else{var E=a[_],A=c;if(mt(e,_,n)||mt(t,_,n))delete a[_];else{if(k(E)&&k(A)){var l=n.get(E)||[],v=n.get(A)||[];l.push({obj:e,key:_}),v.push({obj:t,key:_}),n.set(E,l),n.set(A,v)}a[_]=Ot(a[_],c,r,n)}}}}else a=t;return a}}s(Ot,"mergeTwoObjects");function mt(e,t,r){for(var n=r.get(e[t])||[],a=0,i=n.length;a<i;a++){var o=n[a];if(o.key===t&&o.obj===e)return!0}return!1}s(mt,"wasObjectReferenced");function ne(e){return Array.isArray(e)}s(ne,"isArray");function Rt(e){return typeof e=="function"}s(Rt,"isFunction");function k(e){return!ae(e)&&!ne(e)&&!Rt(e)&&typeof e=="object"}s(k,"isObject");function ae(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}s(ae,"isPrimitive");function na(e,t){return!(!vt(e)||!vt(t))}s(na,"shouldMerge");var aa=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(){function e(t){t===void 0&&(t={});var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,a){return n.concat(a)},[])))}return s(e,"CompositePropagator"),e.prototype.inject=function(t,r,n){var a,i;try{for(var o=aa(this._propagators),u=o.next();!u.done;u=o.next()){var _=u.value;try{_.inject(t,r,n)}catch(c){f.warn("Failed to inject with "+_.constructor.name+". Err: "+c.message)}}}catch(c){a={error:c}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}},e.prototype.extract=function(t,r,n){return this._propagators.reduce(function(a,i){try{return i.extract(a,r,n)}catch(o){f.warn("Failed to inject with "+i.constructor.name+". Err: "+o.message)}return a},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),xe=de("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function gt(e){return e.setValue(xe,!0)}s(gt,"suppressTracing");function ci(e){return e.deleteValue(xe)}s(ci,"unsuppressTracing");function Ge(e){return e.getValue(xe)===!0}s(Ge,"isTracingSuppressed");var Ve="[_0-9a-z-*/]",oa="[a-z]"+Ve+"{0,255}",sa="[a-z0-9]"+Ve+"{0,240}@[a-z]"+Ve+"{0,13}",ua=new RegExp("^(?:"+oa+"|"+sa+")$"),_a=/^[ -~]{0,255}[!-~]$/,ca=/,|=/;function Ea(e){return ua.test(e)}s(Ea,"validateKey");function fa(e){return _a.test(e)&&!ca.test(e)}s(fa,"validateValue");var yt=32,la=512,Nt=",",Pt="=",pa=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return s(e,"TraceState"),e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+Pt+t.get(n)),r},[]).join(Nt)},e.prototype._parse=function(t){t.length>la||(this._internalState=t.split(Nt).reverse().reduce(function(r,n){var a=n.trim(),i=a.indexOf(Pt);if(i!==-1){var o=a.slice(0,i),u=a.slice(i+1,n.length);Ea(o)&&fa(u)&&r.set(o,u)}return r},new Map),this._internalState.size>yt&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,yt))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),He="traceparent",je="tracestate",da="00",Ta="(?!ff)[\\da-f]{2}",Sa="(?![0]{32})[\\da-f]{32}",Aa="(?![0]{16})[\\da-f]{16}",ha="[\\da-f]{2}",va=new RegExp("^\\s?("+Ta+")-("+Sa+")-("+Aa+")-("+ha+")(-.*)?\\s?$");function Oa(e){var t=va.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}s(Oa,"parseTraceParent");var ma=function(){function e(){}return s(e,"W3CTraceContextPropagator"),e.prototype.inject=function(t,r,n){var a=m.getSpanContext(t);if(!(!a||Ge(t)||!Z(a))){var i=da+"-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||g.NONE).toString(16);n.set(r,He,i),a.traceState&&n.set(r,je,a.traceState.serialize())}},e.prototype.extract=function(t,r,n){var a=n.get(r,He);if(!a)return t;var i=Array.isArray(a)?a[0]:a;if(typeof i!="string")return t;var o=Oa(i);if(!o)return t;o.isRemote=!0;var u=n.get(r,je);if(u){var _=Array.isArray(u)?u.join(","):u;o.traceState=new pa(typeof _=="string"?_:void 0)}return m.setSpanContext(t,o)},e.prototype.fields=function(){return[He,je]},e}(),Ra=function(){function e(){}return s(e,"W3CBaggagePropagator"),e.prototype.inject=function(t,r,n){var a=re.getBaggage(t);if(!(!a||Ge(t))){var i=Ur(a).filter(function(u){return u.length<=br}).slice(0,Lr),o=wr(i);o.length>0&&n.set(r,Re,o)}},e.prototype.extract=function(t,r,n){var a=n.get(r,Re),i=Array.isArray(a)?a.join(J):a;if(!i)return t;var o={};if(i.length===0)return t;var u=i.split(J);return u.forEach(function(_){var c=tt(_);if(c){var E={value:c.value};c.metadata&&(E.metadata=c.metadata),o[c.key]=E}}),Object.entries(o).length===0?t:re.setBaggage(t,re.createBaggage(o))},e.prototype.fields=function(){return[Re]},e}(),Fe;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Fe||(Fe={}));var ie;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ie||(ie={}));var It=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ga=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function oe(e){var t,r,n={};if(typeof e!="object"||e==null)return n;try{for(var a=It(Object.entries(e)),i=a.next();!i.done;i=a.next()){var o=ga(i.value,2),u=o[0],_=o[1];if(!ya(u)){f.warn("Invalid attribute key: "+u);continue}if(!Ct(_)){f.warn("Invalid attribute value set for key: "+u);continue}Array.isArray(_)?n[u]=_.slice():n[u]=_}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}s(oe,"sanitizeAttributes");function ya(e){return typeof e=="string"&&e.length>0}s(ya,"isAttributeKey");function Ct(e){return e==null?!0:Array.isArray(e)?Na(e):Lt(e)}s(Ct,"isAttributeValue");function Na(e){var t,r,n;try{for(var a=It(e),i=a.next();!i.done;i=a.next()){var o=i.value;if(o!=null){if(!n){if(Lt(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!0}s(Na,"isHomogeneousAttributeValueArray");function Lt(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}s(Lt,"isValidPrimitiveAttributeValue");var Xe;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Xe||(Xe={}));var D={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},Ei={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},fi={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},li={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},pi={INSERT:"insert",EDIT:"edit",DELETE:"delete"},di={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},Ti={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},Si={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},Ai={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},hi={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},vi={QUEUE:"queue",TOPIC:"topic"},Oi={RECEIVE:"receive",PROCESS:"process"},mi={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},Ri={SENT:"SENT",RECEIVED:"RECEIVED"},Pa="exception",Ia=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ca=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},La=function(){function e(t,r,n,a,i,o,u,_,c){u===void 0&&(u=[]),c===void 0&&(c=ee),this.attributes={},this.links=[],this.events=[],this.status={code:Xe.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this._clock=c,this.name=n,this._spanContext=a,this.parentSpanId=o,this.kind=i,this.links=u,this.startTime=Le(_??c.now()),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return s(e,"Span"),e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(f.warn("Invalid attribute key: "+t),this):Ct(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=this._truncateToSize(r),this):(f.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var r,n;try{for(var a=Ia(Object.entries(t)),i=a.next();!i.done;i=a.next()){var o=Ca(i.value,2),u=o[0],_=o[1];this.setAttribute(u,_)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return this},e.prototype.addEvent=function(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return f.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(f.warn("Dropping extra events."),this.events.shift()),hn(r)&&(typeof n>"u"&&(n=r),r=void 0),typeof n>"u"&&(n=this._clock.now());var a=oe(r);return this.events.push({name:t,attributes:a,time:Le(n)}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){f.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Le(t??this._clock.now()),this._duration=An(this.startTime,this.endTime),this._duration[0]<0&&(f.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,r){r===void 0&&(r=this._clock.now());var n={};typeof t=="string"?n[D.EXCEPTION_MESSAGE]=t:t&&(t.code?n[D.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[D.EXCEPTION_TYPE]=t.name),t.message&&(n[D.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[D.EXCEPTION_STACKTRACE]=t.stack)),n[D.EXCEPTION_TYPE]||n[D.EXCEPTION_MESSAGE]?this.addEvent(Pa,n,r):f.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&f.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,r){return t.length<=r?t:t.substr(0,r)},e.prototype._truncateToSize=function(t){var r=this,n=this._attributeValueLengthLimit;return n<=0?(f.warn("Attribute value limit must be positive, got "+n),t):typeof t=="string"?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map(function(a){return typeof a=="string"?r._truncateToLimitUtil(a,n):a}):t},e}(),x;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(x||(x={}));var se=function(){function e(){}return s(e,"AlwaysOffSampler"),e.prototype.shouldSample=function(){return{decision:x.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),G=function(){function e(){}return s(e,"AlwaysOnSampler"),e.prototype.shouldSample=function(){return{decision:x.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}();function ba(){return function(e){f.error(Da(e))}}s(ba,"loggingErrorHandler");function Da(e){return typeof e=="string"?e:JSON.stringify(Ma(e))}s(Da,"stringifyException");function Ma(e){for(var t={},r=e;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!t[n]){var a=r[n];a&&(t[n]=String(a))}}),r=Object.getPrototypeOf(r);return t}s(Ma,"flattenException");var bt=ba();function gi(e){bt=e}s(gi,"setGlobalErrorHandler");function W(e){try{bt(e)}catch{}}s(W,"globalErrorHandler");var Ye=function(){function e(t){var r,n,a,i;this._root=t.root,this._root||(W(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new G),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new G,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new se,this._localParentSampled=(a=t.localParentSampled)!==null&&a!==void 0?a:new G,this._localParentNotSampled=(i=t.localParentNotSampled)!==null&&i!==void 0?i:new se}return s(e,"ParentBasedSampler"),e.prototype.shouldSample=function(t,r,n,a,i,o){var u=m.getSpanContext(t);return!u||!Z(u)?this._root.shouldSample(t,r,n,a,i,o):u.isRemote?u.traceFlags&g.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,a,i,o):this._remoteParentNotSampled.shouldSample(t,r,n,a,i,o):u.traceFlags&g.SAMPLED?this._localParentSampled.shouldSample(t,r,n,a,i,o):this._localParentNotSampled.shouldSample(t,r,n,a,i,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Dt=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return s(e,"TraceIdRatioBasedSampler"),e.prototype.shouldSample=function(t,r){return{decision:Je(r)&&this._accumulate(r)<this._upperBound?x.RECORD_AND_SAMPLED:x.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var r=0,n=0;n<t.length/8;n++){var a=n*8,i=parseInt(t.slice(a,a+8),16);r=(r^i)>>>0}return r},e}(),wa=T(),Ua=y.AlwaysOn,V=1;function Mt(){return{sampler:wt(wa),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:T().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:T().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:T().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:T().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:T().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:T().OTEL_SPAN_EVENT_COUNT_LIMIT}}}s(Mt,"loadDefaultConfig");function wt(e){switch(e===void 0&&(e=T()),e.OTEL_TRACES_SAMPLER){case y.AlwaysOn:return new G;case y.AlwaysOff:return new se;case y.ParentBasedAlwaysOn:return new Ye({root:new G});case y.ParentBasedAlwaysOff:return new Ye({root:new se});case y.TraceIdRatio:return new Dt(Ut(e));case y.ParentBasedTraceIdRatio:return new Ye({root:new Dt(Ut(e))});default:return f.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Ua+'".'),new G}}s(wt,"buildSamplerFromEnv");function Ut(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return f.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+V+"."),V;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(f.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+V+"."),V):t<0||t>1?(f.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+V+"."),V):t}s(Ut,"getSamplerProbabilityFromEnv");function Ba(e){var t={sampler:wt()},r=Mt(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}s(Ba,"mergeConfig");function xa(e){var t,r,n,a,i,o,u,_,c,E,A,l,v=Object.assign({},e.spanLimits),S=Wr();return v.attributeCountLimit=(o=(i=(a=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&a!==void 0?a:S.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:S.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:ye,v.attributeValueLengthLimit=(l=(A=(E=(_=(u=e.spanLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&_!==void 0?_:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&E!==void 0?E:S.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&A!==void 0?A:S.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&l!==void 0?l:ge,Object.assign({},e,{spanLimits:v})}s(xa,"reconfigureLimits");var Ga=8,Bt=16,Va=function(){function e(){this.generateTraceId=xt(Bt),this.generateSpanId=xt(Ga)}return s(e,"RandomIdGenerator"),e}(),ue=Buffer.allocUnsafe(Bt);function xt(e){return s(function(){for(var r=0;r<e/4;r++)ue.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<e&&!(ue[r]>0);r++)r===e-1&&(ue[e-1]=1);return ue.toString("hex",0,e)},"generateId")}s(xt,"getIdGenerator");var Ha=function(){function e(t,r,n){this._tracerProvider=n;var a=Ba(r);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=r.idGenerator||new Va,this.resource=n.resource,this.instrumentationLibrary=t}return s(e,"Tracer"),e.prototype.startSpan=function(t,r,n){var a,i;r===void 0&&(r={}),n===void 0&&(n=L.active()),r.root&&(n=m.deleteSpan(n));var o=m.getSpan(n);if(Ge(n)){f.debug("Instrumentation suppressed, returning Noop Span");var u=m.wrapSpanContext(Qe);return u}var _=o?.spanContext(),c=this._idGenerator.generateSpanId(),E,A,l;!_||!m.isSpanContextValid(_)?E=this._idGenerator.generateTraceId():(E=_.traceId,A=_.traceState,l=_.spanId);var v=(a=r.kind)!==null&&a!==void 0?a:Fe.INTERNAL,S=((i=r.links)!==null&&i!==void 0?i:[]).map(function(Ft){return{context:Ft.context,attributes:oe(Ft.attributes)}}),N=oe(r.attributes),R=this._sampler.shouldSample(n,E,t,v,N,S),Ke=R.decision===ie.RECORD_AND_SAMPLED?g.SAMPLED:g.NONE,ce={traceId:E,spanId:c,traceFlags:Ke,traceState:A};if(R.decision===ie.NOT_RECORD){f.debug("Recording is off, propagating context in a non-recording span");var u=m.wrapSpanContext(ce);return u}var Ee=new La(this,n,t,ce,v,l,S,r.startTime),$a=oe(Object.assign(N,R.attributes));return Ee.setAttributes($a),Ee},e.prototype.startActiveSpan=function(t,r,n,a){var i,o,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=n):(i=r,o=n,u=a);var _=o??L.active(),c=this.startSpan(t,i,_),E=m.setSpan(_,c);return L.with(E,u,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),_e=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ja=function(){function e(t){this._spanProcessors=t}return s(e,"MultiSpanProcessor"),e.prototype.forceFlush=function(){var t,r,n=[];try{for(var a=_e(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.forceFlush())}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return new Promise(function(u){Promise.all(n).then(function(){u()}).catch(function(_){W(_||new Error("MultiSpanProcessor: forceFlush failed")),u()})})},e.prototype.onStart=function(t,r){var n,a;try{for(var i=_e(this._spanProcessors),o=i.next();!o.done;o=i.next()){var u=o.value;u.onStart(t,r)}}catch(_){n={error:_}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(t){var r,n;try{for(var a=_e(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;o.onEnd(t)}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.shutdown=function(){var t,r,n=[];try{for(var a=_e(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.shutdown())}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return new Promise(function(u,_){Promise.all(n).then(function(){u()},_)})},e}(),Fa=function(){function e(){}return s(e,"NoopSpanProcessor"),e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();function Xa(e){e.unref()}s(Xa,"unrefTimer");var Ya=function(){function e(t,r){this._exporter=t,this._finishedSpans=[];var n=T();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Pe(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(f.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return s(e,"BatchSpanProcessorBase"),e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&g.SAMPLED)!==0&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())},e.prototype._flushAll=function(){var t=this;return new Promise(function(r,n){for(var a=[],i=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),o=0,u=i;o<u;o++)a.push(t._flushOneBatch());Promise.all(a).then(function(){r()}).catch(n)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var a=setTimeout(function(){n(new Error("Timeout"))},t._exportTimeoutMillis);L.with(gt(L.active()),function(){t._exporter.export(t._finishedSpans.splice(0,t._maxExportBatchSize),function(i){var o;clearTimeout(a),i.code===P.SUCCESS?r():n((o=i.error)!==null&&o!==void 0?o:new Error("BatchSpanProcessor: span export failed"))})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(r){W(r)})},this._scheduledDelayMillis),Xa(this._timer))},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Ka=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(e){Ka(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return s(t,"BatchSpanProcessor"),t.prototype.onShutdown=function(){},t}(Ya),M;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(M||(M={}));var ka=function(){function e(t){t===void 0&&(t={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=ra({},Mt(),xa(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:Me.empty(),this.resource=Me.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var a=this._buildExporterFromEnv();if(a!==void 0){var i=new Gt(a);this.activeSpanProcessor=i}else this.activeSpanProcessor=new Fa}return s(e,"BasicTracerProvider"),e.prototype.getTracer=function(t,r,n){var a=t+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(a)||this._tracers.set(a,new Ha({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(a)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return f.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new ja(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),m.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&L.setGlobalContextManager(t.contextManager),t.propagator&&re.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(a){var i,o=setTimeout(function(){a(new Error("Span processor did not completed within timeout period of "+t+" ms")),i=M.timeout},t);n.forceFlush().then(function(){clearTimeout(o),i!==M.timeout&&(i=M.resolved,a(i))}).catch(function(u){clearTimeout(o),i=M.error,a(u)})})});return new Promise(function(n,a){Promise.all(r).then(function(i){var o=i.filter(function(u){return u!==M.resolved});o.length>0?a(o):n()}).catch(function(i){return a([i])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()},e.prototype._getSpanExporter=function(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()},e.prototype._buildPropagatorFromEnv=function(){var t=this,r=Array.from(new Set(T().OTEL_PROPAGATORS)),n=r.map(function(i){var o=t._getPropagator(i);return o||f.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),o}),a=n.reduce(function(i,o){return o&&i.push(o),i},[]);if(a.length!==0)return r.length===1?a[0]:new ia({propagators:a})},e.prototype._buildExporterFromEnv=function(){var t=T().OTEL_TRACES_EXPORTER;if(t!=="none"){var r=this._getSpanExporter(t);return r||f.error('Exporter "'+t+'" requested through environment variable is unavailable.'),r}},e._registeredPropagators=new Map([["tracecontext",function(){return new ma}],["baggage",function(){return new Ra}]]),e._registeredExporters=new Map,e}();function Wa(e,t){return new Promise(function(r){L.with(gt(L.active()),function(){e.export(t,function(n){r(n)})})})}s(Wa,"_export");var za={_export:Wa},Vt=function(){function e(t){this._exporter=t,this._shutdownOnce=new Pe(this._shutdown,this)}return s(e,"SimpleSpanProcessor"),e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&g.SAMPLED)!==0&&za._export(this._exporter,[t]).then(function(r){var n;r.code!==P.SUCCESS&&W((n=r.error)!==null&&n!==void 0?n:new Error("SimpleSpanProcessor: span export failed (status "+r+")"))}).catch(function(r){W(r)})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),Qa=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Za=function(){function e(){}return s(e,"ConsoleSpanExporter"),e.prototype.export=function(t,r){return this._sendSpans(t,r)},e.prototype.shutdown=function(){return this._sendSpans([]),Promise.resolve()},e.prototype._exportInfo=function(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:ft(t.startTime),duration:ft(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},e.prototype._sendSpans=function(t,r){var n,a;try{for(var i=Qa(t),o=i.next();!o.done;o=i.next()){var u=o.value;console.dir(this._exportInfo(u),{depth:3})}}catch(_){n={error:_}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}if(r)return r({code:P.SUCCESS})},e}(),Ja=Object.defineProperty,qa=s((e,t,r)=>t in e?Ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,"__defNormalProp"),Ht=s((e,t,r)=>(qa(e,typeof t!="symbol"?t+"":t,r),r),"__publicField");class jt{constructor(t,r,n){Ht(this,"_globalAttributes",{}),Ht(this,"tracer");const a=new ka({resource:new Me({[h.SERVICE_NAME]:"gitlens",[h.SERVICE_VERSION]:t.extensionVersion,[h.DEPLOYMENT_ENVIRONMENT]:t.env,[h.DEVICE_ID]:t.machineId,[h.OS_TYPE]:t.platform,"extension.id":t.extensionId,"session.id":t.sessionId,language:t.language,"vscode.edition":t.vscodeEdition,"vscode.version":t.vscodeVersion,"vscode.host":t.vscodeHost})});n&&(f.setLogger(new $t,Or.n.VERBOSE),a.addSpanProcessor(new Vt(new Za)));const i=new Dn({url:n?"https://otel-dev.gitkraken.com:4318/v1/traces":"https://otel.gitkraken.com:4318/v1/traces",compression:"gzip",httpAgentOptions:r?.options});a.addSpanProcessor(n?new Vt(i):new Gt(i)),a.register(),this.tracer=m.getTracer(t.extensionId)}dispose(){m.disable()}sendEvent(t,r,n,a){const i=this.tracer.startSpan(t,{startTime:n??Date.now()});i.setAttributes(this._globalAttributes),r!=null&&i.setAttributes(r),i.end(a)}startEvent(t,r,n){const a=this.tracer.startSpan(t,{startTime:n??Date.now()});return a.setAttributes(this._globalAttributes),r!=null&&a.setAttributes(r),a}setGlobalAttributes(t){this._globalAttributes=Object.fromEntries(t)}}s(jt,"OpenTelemetryProvider")}};
